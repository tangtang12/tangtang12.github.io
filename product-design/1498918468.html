<!DOCTYPE HTML>
<html class="no-js" lang="zh-CN">

<head>
    <!--[if lte IE 9]>
<meta http-equiv="refresh" content="0;url=http://lsw.name/warn.html">
<![endif]-->
<meta charset="utf-8">

<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
<meta http-equiv="mobile-agent" content="format=html5; url=http://lsw.name">
<meta name="author" content="刘某某">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/SimpleStyle.min.css">

<link rel="shortcut icon" href="/images/favicon.png">


<title>react 的 mvc 模式、脚手架以及把 jsx 渲染为真实的 dom 原理 - 文艺青年</title>

<meta name="keywords" content="原创IT博客你应该为梦想全力以赴，而不是到最后甘愿认输。">

<meta name="description " content="前端，博客，个人博客">
</head>
<body>
<div id="nav">
    <nav class="nav-menu">
        <a class="site-name current" href="/" title="说">说</a>
        <a class="site-index current" href="/"><i class="fa fa-home"></i><span>首页</span></a>
        <a href="/archives" title="归档"><i class="fa fa-archives"></i><span>归档</span></a>
        <a href="/tags" title="标签"><i class="fa fa-tags"></i><span>标签</span></a>
        <!-- custom single page of menus -->
        
        
        <a href="/help" title="帮助">
            <i class="fa fa-question-circle"></i>
            <span>帮助</span>
        </a>
        
    </nav>
</div>

<div class="nav-user">
    <a class="btn-search" href="#"><i class="fa fa-search"></i></a>
    <a class="btn-read-mode" href="#"><i class="fa fa-sun-o"></i></a>
    <a class="btn-sns-qr" href="javascript:"><i class="fa fa-telegram"></i></a>
</div>

<div id="wrapper" class="clearfix">
    <div id="body">
        <div class="main" id="main">
            <div id="cover">
    <div class="cover-img"></div>
    <div class="cover-info">
        
        <h1 class="cover-siteName">说IT</h1>
        <h3 class="cover-siteTitle">用代码摇滚这个世界</h3>
        <p class="cover-siteDesc">一个关注技术与人文的IT博客</p>
        <div class="cover-sns">
            
            <div class="btn btn-telegram">
                <a href="http://t.me/kunyintang" target="_blank" title="telegram" ref="friend">
                    <i class="fa fa-telegram"></i>
                </a>
            </div>
            
            <div class="btn btn-instagram">
                <a href="https://www.instagram.com/mtangsir/" target="_blank" title="instagram" ref="friend">
                    <i class="fa fa-instagram"></i>
                </a>
            </div>
            
            <div class="btn btn-twitter">
                <a href="https://twitter.com/tangkunyin" target="_blank" title="twitter" ref="friend">
                    <i class="fa fa-twitter"></i>
                </a>
            </div>
            
            <div class="btn btn-github">
                <a href="https://github.com/tangkunyin" target="_blank" title="github" ref="friend">
                    <i class="fa fa-github"></i>
                </a>
            </div>
            
        </div>
    </div>
</div>
            <div class="page-title">
    <ul>
        <li><a href="/">最新</a></li>
        
            
                <li class="">
                    <a href="/categories/front-end" data-name="前端">前端</a>
                </li>
            
                <li class="">
                    <a href="/categories/back-end" data-name="node">node</a>
                </li>
            
                <li class="active">
                    <a href="/categories/product-design" data-name="框架">框架</a>
                </li>
            
                <li class="">
                    <a href="/categories/others" data-name="其他">其他</a>
                </li>
            
        
        <li class="page-search">
    <form id="search" class="search-form">
        <label for="s" class="sr-only">请输入关键字</label>
        <input class="search-field" type="text" name="s" class="text" placeholder="请输入关键字" />
        <button type="submit" class="search-form-submit" title="搜索"><i class="fa fa-search"></i></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
</li>

    </ul>
</div>
<div class="main-inner">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
        <div class="post-header">
            <div class="post-author clearfix">
                <a class="avatar fleft" href="https://lsw.name" target="_blank">
                    <img width="48" src="/images/favicon.png" alt="avatar"/>
                </a>
                <p><span class="label">作者</span>
                    <a href="https://lsw.name" target="_blank">刘某某</a>
                    <span title="最后编辑于2017-07-01">2017-07-01</span>
                </p>
                <p>一个写代码的「伪文人」</p>
            </div>
            <h2 class="post-title">React 的 MVC 模式、脚手架以及把 JSX 渲染为真实的 DOM 原理</h2>
            <div class="post-meta">
                本文总共7649个字 | 您是第<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>位看到它们的小伙伴
            </div>
        </div>
        <div class="post-content markdown-body">
            <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><h2 id="简述-MVC-框架"><a href="#简述-MVC-框架" class="headerlink" title="简述 MVC 框架"></a>简述 MVC 框架</h2><blockquote>
<p>MVC 是一种使用 MVC(Model View Controller 模型-视图-控制器)设计创建 Web 应用程序的模式</p>
</blockquote>
<ul>
<li>Model(模型)可以简单的理解为数据层，用于提供数据。对数据库的操作这一些的代码作为 model 层，</li>
<li>View(视图)是应用程序中处理数据显示的部分，通常视图是依据模型数据创建的，一般所有的 JSP、HTMl 等页面就是 View 层</li>
<li>Controller(控制器)功能就是将 Model 和 View 层进行关联，比如 View 主要是显示数据的，但是数据又需要 Model 去访问，这样的话，View 会先告诉 Controller，然后 Controller 再告诉 Model，Model 请求完数据之后，再告诉 View。这样 View 就可以显示数据了</li>
</ul>
<h2 id="React-脚手架"><a href="#React-脚手架" class="headerlink" title="React 脚手架"></a>React 脚手架</h2><blockquote>
<p>前端的工程化开发</p>
</blockquote>
<ul>
<li>划分组件开发</li>
<li>基于路由的 SPA 单页面开发</li>
<li>一般都是基于 ES6 来编写代码(最后部署上线的时候，我们需要把 ES6 编译为 ES5=&gt;基于 babel 来完成编译)</li>
<li>可能用到 Less/Sass 等，我们也需要对应的插件把他们进行预编译</li>
<li>最后为了优化性能，减少 http 请求的次数，我们需要把 js/css 进行合并压缩</li>
<li>webpack 来完成以上页面组件合并、js/css 编译加合并等工作<blockquote>
<p>创建脚手架</p>
</blockquote>
</li>
<li>安装<code>create-react-app</code></li>
</ul>
<figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line"><span class="string">npm </span><span class="string">install </span><span class="built_in">create-react-app</span> -g</span><br></pre></td></tr></table></figure>
<ul>
<li>基于<code>create-react-app [项目名称]</code>脚手架的命令，创建一个基于 react 的自动化/工程化项目目录，项目名称中不能出现大写字母、中文汉字，特殊符号(-或者_是可以)等<blockquote>
<p>脚手架生成目录中的一些内容</p>
</blockquote>
</li>
<li>node_modules 当前项目中依赖的包都安装在这里(.bin 本地项目中可执行的命令，在 package.json 的 scripts 中配置对应的脚本命令)</li>
<li>public 存放的是当前项目的 HTML 页面(单页面应用放一个 index.html 即可，多页面根据自己需求放置需要的页面)</li>
<li>src 项目结构中主要的目录，因为后期所有的 JS、路由、组件都是放到这里面(包括需要编写的 css 或者图片等)，index.js 是当前项目的主入口文件</li>
<li><code>.gitignore</code>git 提交时候，忽略提交文件的配置项</li>
<li><code>package.json</code> 当前项目的配置清单,基于脚手架生成工程目录，自动帮我们安装了三个模块:react/react-dom/react-scripts,react-scripts 集成了 webpack 需要的内容<br>(编译包：babel 一套，css 处理的一套，eslint 一套，webpack 一套，其他的，没有 less/sass 的处理内容，项目中若是使用 less，我们需要自己额外的安装)</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">//package.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"react"</span>: <span class="string">"^16.4.1"</span>,</span><br><span class="line">    <span class="attr">"react-dom"</span>: <span class="string">"^16.4.1"</span>,</span><br><span class="line">    <span class="attr">"react-scripts"</span>: <span class="string">"1.1.4"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"start"</span>:</span><br><span class="line">      <span class="string">"react-scripts start"</span> /*开发环镜下，基于webpack编译处理，最后可以预览当前开发的项目成果(在webpack中安装了webpack-dev-server插件，基于这个插件会自动创建一个web服务[端口号默认是<span class="number">3000</span>]，webpack会默认打开浏览器，并展示我们的页面，并且能够监听我们代码的改变，如果代码改变，webpack会自动重新编译，并且刷新浏览器完成重新渲染)*/,</span><br><span class="line">    <span class="attr">"build"</span>:</span><br><span class="line">      <span class="string">"react-scripts build"</span> /*项目需要部署到服务器上，我们先执行yarn build，把项目整体编译打包</span><br><span class="line">        (完成后会在项目中生成一个build文件夹，这个文件夹中包含了所有编译后的内容，我们把它上传到服务器即可),而且在服务上进行部署的时候，不需要安装任意的模块*/,</span><br><span class="line">    "test": "react-scripts test --env=jsdom",</span><br><span class="line">    "eject": "react-scripts eject"</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="public-中路径的问题"><a href="#public-中路径的问题" class="headerlink" title="public 中路径的问题"></a>public 中路径的问题</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"manifest"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/manifest.json"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/favicon.ico"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在 react 当中，所有的逻辑都是在 jS 中完成的(包括页面结构的创建)，如果想给当前页面导入一些 css 样式或者 img 图片等内容，我们有两种方式，</p>
</blockquote>
<ul>
<li>第一种在 JS 中基于 es6 module 模块规范，使用 import 导入，这样 webpack 在编译合并 JS 的时候，会把导入的资源文件等插入到页面的结构中(绝对不能在 js 管控的结构中通过相对目录./或者../,导入资源) ，因为 webpack 编译的时候，地址就不在是 之前的相对路径</li>
<li>第二种，如果不想在 js 中导入(JS 中导入的资源最后都会基于 webpack 编译，我们也可以把资源手动的在 HTML 中导入，但是 HTML 最后 也要基于 webpack 编译，导入的地址也不建议写相对地址，而是使用%public_URL%写成绝对地址)</li>
</ul>
<h2 id="脚手架的深入"><a href="#脚手架的深入" class="headerlink" title="脚手架的深入"></a>脚手架的深入</h2><blockquote>
<p>create-react-app 脚手架为了结构目录清晰，把安装的 webpack 及配置文件都集成在了 react-scripts 模块上，放到了 node_modules 中</p>
</blockquote>
<blockquote>
<p>真实项目中，我们需要在脚手架默认安装的基础上，额外安装一些我们需要的模块，例如：react-router-dom/axios/…,再比如 less/less-loader…</p>
</blockquote>
<ul>
<li>情况一：如果我们安装其他的组件，但是安装成功后不需要修改 webpack 的配置项，此时我们直接安装，并且调取使用即可</li>
<li>情况二：我们安装的插件是基于 webpack 处理的，也就是需要把安装的模块配置到 webpack 中，需要重新修改 webpack 配置项了：<ul>
<li>首先需要把隐藏到 node_modules 的配置项暴露到项目中<code>yarn eject</code>,<br>首先会提示确认是否执行 eject 操作，这个操作是不可逆的，一旦暴露出来配置项，就无法隐藏回去了，如果当前的项目基于 git 管理，会报错，提醒你提交到历史区</li>
<li>再去修改对应的配置项即可，一旦暴露后，项目目录中多了两个文件夹：config 存放的是 webpack 的配置文件(webpack.config.dev.js 开发环镜下的配置项-yarn start，webpack.config.prod.js 生产环镜下的配置项-yarn build)，scripts 存放的是可执行脚本的 js 文件(start.js/build.js/test.js=&gt;yarn xxx 对应)</li>
<li>package.json 也改变了，<blockquote>
<p>例如 less less 是开发和生产环镜下都需要配置的</p>
</blockquote>
</li>
</ul>
</li>
<li>我们预览项目的时候，也是基于 webpack 编译，把编译后的内容放到浏览中运行，所以如果项目中使用了 less，我们需要修改 webpack 配置项，在配置项中放入 less 的编译工作，这样后期预览项目，首先基于 webpack 编译成 css，再呈放到页面中</li>
</ul>
<h2 id="环镜变量的修改、协议、端口号"><a href="#环镜变量的修改、协议、端口号" class="headerlink" title="环镜变量的修改、协议、端口号"></a>环镜变量的修改、协议、端口号</h2><ul>
<li><code>set HTTPS=true&amp;&amp;yarn start</code> 开启 HTTPS 协议 设置环镜变量 HTTPS 的值</li>
<li><code>set PORT=63341&amp;&amp;yarn start</code> 修改端口</li>
</ul>
<h2 id="react-amp-amp-react-dom"><a href="#react-amp-amp-react-dom" class="headerlink" title="react&amp;&amp;react-dom"></a>react&amp;&amp;react-dom</h2><blockquote>
<p>[渐进式框架]</p>
</blockquote>
<ul>
<li>目前最流行的框架设计思想，一般框架中包含很多内容，这样导致框架的体积过于臃肿，不利于页面的优化，真实项目中，我们使用一个框架，不一定用到所有的功能，此时我们应该把框架的功能拆分，用户想用什么，让其自己自由组合即可<blockquote>
<p>[全家桶]</p>
</blockquote>
</li>
<li>渐进式框架 N 多部分的组合</li>
<li>vue 全家桶:<code>vue-cli/vue/vue-router/vuex/axios(fetch)/vue element(vant)</code></li>
<li>react 全家桶:<code>creatr-react-app/react/react-dom/react-router/redux/react-redux/axios/ant/dva/saga/mobx</code><blockquote>
<p>react:react 框架的核心部分，提供了 Component 类可以供我们进行组件开发，提供了钩子函数(生命周期函数:所有的生命周期函数都是基于回调函数完成的)<br>react-dom:把 jsx 语法(react 独有的语法)渲染为真实的 DOM(能够放到页面中展示的结构都叫做真实的 DOM)的组件</p>
</blockquote>
</li>
</ul>
<h3 id="把-JSX-虚拟-DOM-变为真实的-DOM"><a href="#把-JSX-虚拟-DOM-变为真实的-DOM" class="headerlink" title="把 JSX(虚拟 DOM)变为真实的 DOM"></a>把 JSX(虚拟 DOM)变为真实的 DOM</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//导入组件</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="comment">//语法</span></span><br><span class="line">ReactDOM.render([jsx],[container],[callback]);把jsx元素渲染到页面中</span><br><span class="line">       jsx：react虚拟元素</span><br><span class="line">       container容器，我们想把元素放到页面中的哪个容器中</span><br><span class="line">       callback：当把内容放到页面中呈现触发的回调函数</span><br></pre></td></tr></table></figure>
<blockquote>
<p>JSX：react 独有的语法 javascript+XML(HTML)</p>
</blockquote>
<ul>
<li>和我们之前自己拼接的 HTML 字符串类似，都是把 HTML 结构代码和 JS 代码或者数据混合在一起了，但是他不是字符串<blockquote>
<p>在写 render 的时候的规范 1.不建议我们把 jsx 直接渲染到 body 中，而是放在自己创建一个容器中，一般我们都放在一个 ID 为 root 的 DIV 中即可*/ 2.在 JSX 中出现的{}是存放 js 的，但是要求 js 代码执行完成需要有返回结果(JS 表达式)</p>
<pre><code>- 不能直接放一个对象数据类型的值(对象(除了给style赋值)、数组(数组中没有对象都是基本值或者是JSX元素，这样是可以的)、函数都不行)
- 可以是基本类型的值(布尔类型的值什么都不显示，但是不会报错，null、undefined也是JSX元素，代表是空)
- 循环判断的语句 都不支持，但是支持三元运算符
</code></pre><p>3.循环数组创建 JSX 元素(一般都是基于数组的 MAP 方法完成迭代)，需要给创建的元素设置唯一的 key 值(当前本次循环内唯一即可) 4.只能出现一个根元素 5.给元素设置样式类用的是 className 不是 class<br>6.style 中不能直接写样式字符串，需要基于一个样式对象来遍历赋值<br>jsx 渲染机制 1.基于 babel 中的语法解析模块(babel-preset-react)把 jsx 语法编译为 React.createElement(…)的结构 2.执行 React.createElement(type,props,children)函数，会创建一个对象(虚拟 DOM)<br>3.ReactDOM.render(JSX 语法最后生成的对象，容器，回调函数)，基于 Render 方法把生成的对象动态创建为 DOM 元素，插入到指定的容器中</p>
</blockquote>
</li>
<li>JS 原理</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//参数至少两个，type/props children这个部分可能没有可能有多个</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, props, ...childrens</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//返回一个对象，创建一个对象，默认有四个属性(type,props,ref,key)</span></span><br><span class="line">  <span class="comment">//根据传递的值修改这个对象</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * type 传递的type的值</span></span><br><span class="line"><span class="comment">    * props 需要做一些处理:大部分传递的props属性都赋值给对象的props，有一些比较特殊 如果是ref或者key，我们需要把传递的props的这两个属性值删除掉</span></span><br><span class="line"><span class="comment">    * 把传递的children作为新创建对象的props中的一个属性*/</span></span><br><span class="line">  props = props || &#123;&#125;;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;</span><br><span class="line">    type: <span class="string">"null"</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">      children: <span class="string">""</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ref: <span class="literal">null</span>,</span><br><span class="line">    key: <span class="literal">null</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//obj=&#123;...obj,type,props&#125;;//=&gt;&#123;type:type,props:props&#125;用传递的type和props覆盖原有的默认值</span></span><br><span class="line">  obj = &#123;</span><br><span class="line">    ...obj,</span><br><span class="line">    type,</span><br><span class="line">    props: &#123;</span><br><span class="line">      ...props,</span><br><span class="line">      children: childrens.length &lt;= <span class="number">1</span> ? childrens[<span class="number">0</span>] || <span class="string">""</span> : childrens</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//=&gt;把ref和key都提取出来,并且删除props中的属性</span></span><br><span class="line">  <span class="string">"key"</span> <span class="keyword">in</span> obj.props ? ((obj.key = obj.props.key), <span class="keyword">delete</span> obj.props.key) : <span class="literal">null</span>;</span><br><span class="line">  <span class="string">"ref"</span> <span class="keyword">in</span> obj.props</span><br><span class="line">    ? ((obj.ref = obj.props.ref), (obj.props.ref = <span class="literal">undefined</span>))</span><br><span class="line">    : <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Render把创建的元素生成对象的DOM元素，最后插入到页面中*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">obj, container, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; type, props &#125; = obj || &#123;&#125;,</span><br><span class="line">    newElement = <span class="built_in">document</span>.createElement(type);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> props) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!props.hasOwnProperty(attr)) <span class="keyword">break</span>; <span class="comment">//结束遍历</span></span><br><span class="line">    <span class="keyword">if</span> (!props[attr]) <span class="keyword">continue</span>; <span class="comment">//继续下一个</span></span><br><span class="line">    <span class="keyword">let</span> value = props[attr];</span><br><span class="line">    <span class="keyword">if</span> (attr === <span class="string">"className"</span>) &#123;</span><br><span class="line">      newElement.setAttribute(<span class="string">"class"</span>, value);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (attr === <span class="string">"style"</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (value === <span class="string">""</span>) <span class="keyword">continue</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> styKey <span class="keyword">in</span> value) &#123;</span><br><span class="line">        <span class="keyword">if</span> (value.hasOwnProperty(styKey)) &#123;</span><br><span class="line">          newElement.style[styKey] = value[styKey];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (attr === <span class="string">"children"</span>) &#123;</span><br><span class="line">      <span class="comment">/*可能是一个值:是字符串成也可能是JSX对象  或者数组 数组中的每一项可能是字符串也可能是JSX对象*/</span></span><br><span class="line">      <span class="keyword">if</span> (!(value <span class="keyword">instanceof</span> <span class="built_in">Array</span>)) &#123;</span><br><span class="line">        value = [value]; <span class="comment">//统一变成数组方便操作</span></span><br><span class="line">      &#125;</span><br><span class="line">      value.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//验证item是什么类型的 字符串就是创建文本节点，是对象，再次执行render方法，把创建的元素放到做开始的大盒子中</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> item === <span class="string">"string"</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> text = <span class="built_in">document</span>.createTextNode(item);</span><br><span class="line">          newElement.appendChild(text);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          render(item, newElement);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    newElement.setAttribute(attr, value); <span class="comment">//基于setAttribute可以使设置的属性表现在HTML上</span></span><br><span class="line">  &#125;</span><br><span class="line">  container.appendChild(newElement);</span><br><span class="line">  callback &amp;&amp; callback();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方法的使用</span></span><br><span class="line"><span class="keyword">let</span> obj = createElement(</span><br><span class="line">  <span class="string">"div"</span>,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">"box"</span>, <span class="attr">className</span>: <span class="string">"box"</span>, <span class="attr">style</span>: &#123; <span class="attr">color</span>: <span class="string">"red"</span> &#125; &#125;,</span><br><span class="line">  createElement(<span class="string">"h2"</span>, &#123; <span class="attr">className</span>: <span class="string">"title"</span> &#125;, <span class="string">"\u7CFB\u7EDF\u63D0\u793A"</span>),</span><br><span class="line">  createElement(</span><br><span class="line">    <span class="string">"div"</span>,</span><br><span class="line">    &#123; <span class="attr">className</span>: <span class="string">"content"</span> &#125;,</span><br><span class="line">    <span class="string">"\u6E29\u99A8\u63D0\u793A\uFF1A\u8BED\u6CD5\u9519\u8BEF\uFF01"</span></span><br><span class="line">  ),</span><br><span class="line">  <span class="string">"\u672C\u64CD\u4F5C\u5C31\u662F\u4E00\u4E2A\u6D4B\u8BD5\uFF01"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">render(obj, root, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"ok"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

        </div>
        <div class="post-tool">
            <a class="btn-thumbs-up" href="javascript:void(0);" data-cid="52" title="95">
                <i class="fa fa-thumbs-up" aria-hidden="true"></i> 打赏
            </a>
        </div>
        
        <div class="post-tags">标签：
            
            <a href="/tags/JavaScript/">JavaScript</a>
            
            <a href="/tags/React/">React</a>
            
        </div>
        
    </article>
    
    <p>本文代表个人观点，内容仅供参考。若有不恰当之处，望不吝赐教！</p>
    
    
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    var disqus_config = function () {
        this.page.url = 'http://lsw.name/product-design/1498918468.html';
        this.page.identifier = 'product-design//1498918468.html';
    };
    (function () { // DON'T EDIT BELOW THIS LINE
        var d = document, disqus_shortname = 'shuoit', s = d.createElement('script');
        s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>

</div>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        </div><!-- end #main-->
    </div><!-- end #body -->
    <footer class="footer">
    <div class="footer-inner">
        <p>
            <a href="/about"  title="关于本站">关于本站</a>&nbsp;&nbsp;<em>·</em>&nbsp;&nbsp;
            <!-- 自定义链接 -->
            <a href="/help" title="help" >急救中心</a>&nbsp;&nbsp;<em>·</em>&nbsp;&nbsp;
            <a href="/links" title="友情链接">友情链接</a>&nbsp;&nbsp;<em>·</em>&nbsp;&nbsp;
            <a href="/app" title="App下载">App下载</a>
        </p>
        <p>
            本站点采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>，已建立<a href="/timeline" id="siteBuildingTime"></a>天<br/>
            ©2017 基于<a href="http://hexo.io" target="_blank">Hexo</a>搭建
            ，主题&nbsp;<a href="https://github.com/tangkunyin/hexo-theme-jsimple" target="_blank">JSimple</a>
            ，作者<a href="http://lsw.name" target="_blank">刘某某</a>
            ，Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>
        </p>
        
<!-- Tencent Analytics -->
<script type="text/javascript" src="//tajs.qq.com/stats?sId=65036274" charset="UTF-8"></script>


    </div>
</footer>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script src="/js/InsightSearch.js"></script>
<script src="/js/SimpleCore.js"></script>

</div>
<div class="fixed-btn">
    <a class="btn-gotop" href="javascript:"> <i class="fa fa-angle-up"></i></a>
</div>
<script>
    $(function () {
        SimpleCore.init({
            buildingTime: '01/20/2018',
            current: $('.post-tags').length > 0 ? 'post' : 'archive',
            snsQRCode: '/images/sns-qrcode.png',
            donateImg: '/images/donate-qr.png',
        });
    });
</script>
</body>
</html>
